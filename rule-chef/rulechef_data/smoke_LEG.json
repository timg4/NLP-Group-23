{
  "name": "smoke_LEG",
  "task": {
    "name": "extract_LEG",
    "description": "Extract ONLY LEG (legal references).\nHARD RULES:\n- Only extract spans that include legal markers like: \u00a7, Art., Artikel, Abs., Satz, Nr., Z., lit.\n- Also allow law abbreviations ONLY when used as a law reference (e.g., 'BGB', 'HGB', 'AktG', 'DSGVO')\n  but DO NOT match arbitrary words or full sentences.\n- DO NOT extract plain dates, plain numbers, or quoted text unless it is a legal reference.\nReturn character offsets into the ORIGINAL context.\n",
    "input_schema": {
      "context": "string"
    },
    "output_schema": {
      "spans": "List[Span]"
    },
    "type": "extraction"
  },
  "description": "",
  "examples": [
    {
      "id": "e2c2f915",
      "input": {
        "context": "Die Kursentwicklung des jeweiligen Korbbestandteilsi entspricht dem Quotienten aus Ki (final) (wie in C.19 definiert) und Ki (initial)."
      },
      "expected_output": {
        "spans": [
          {
            "text": "C.19",
            "start": 102,
            "end": 106
          }
        ]
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "0be7063e",
      "input": {
        "context": "Kennzahlen gem\u00e4\u00df CRR/CRD IV (mit \u00dcbergangsvorschriften) 30.06.2017 31.12.2016 Risikogewichtete Aktiva (in Mrd. EUR) 75,9"
      },
      "expected_output": {
        "spans": [
          {
            "text": "CRR/CRD IV",
            "start": 17,
            "end": 27
          }
        ]
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "14d2c3e2",
      "input": {
        "context": "Diese Endg\u00fcltigen Bedingungen wurden f\u00fcr die Zwecke des Artikels 5 Absatz 4 der EU-Prospektrichtlinie (Richtlinie 2003/71/EG), in ihrer jeweils g\u00fcltigen Fassung, \u201eProspektrichtlinie\u201c) abgefasst und sind in Verbindung mit dem Basisprospekt unter dem Debt Issuance Programme der DekaBank Deutsche Girozentrale von dem 11."
      },
      "expected_output": {
        "spans": [
          {
            "text": "Artikels 5 Absatz 4",
            "start": 56,
            "end": 75
          },
          {
            "text": "Richtlinie 2003/71/EG",
            "start": 103,
            "end": 124
          }
        ]
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "78757689",
      "input": {
        "context": "Artikel 157 Zusammenarbeit bei der Aufsicht Artikel 154 Sicherungsma\u00dfnahmen"
      },
      "expected_output": {
        "spans": [
          {
            "text": "Artikel 157",
            "start": 0,
            "end": 11
          },
          {
            "text": "Artikel 154",
            "start": 44,
            "end": 55
          }
        ]
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "ef059fb2",
      "input": {
        "context": "Die Mitteilung an die Gl\u00e4ubiger erfolgt gem\u00e4\u00df \u00a7 12. (6) Verbindlichkeit der Festsetzungen."
      },
      "expected_output": {
        "spans": [
          {
            "text": "\u00a7 12. (6)",
            "start": 46,
            "end": 55
          }
        ]
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "2172affb",
      "input": {
        "context": "Die Emittentin wird Informationen nach der Emission au\u00dfer in dem Falle von Bekanntmachungen gem\u00e4\u00df \u00a7 8 der Allgemeinen Emissionsbedingungen nicht liefern."
      },
      "expected_output": {
        "spans": [
          {
            "text": "\u00a7 8",
            "start": 98,
            "end": 101
          }
        ]
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "362273a4",
      "input": {
        "context": "Die Emittentin beh\u00e4lt sich ferner das Recht vor, das Angebotsvolumen sowie den m\u00f6glichen Gesamtnennbetrag w\u00e4hrend der Laufzeit gem\u00e4\u00df \u00a7 11 der Emissionsbedingungen durch Aufstockungen zu erh\u00f6hen oder durch eine R\u00fccknahme zu reduzieren."
      },
      "expected_output": {
        "spans": [
          {
            "text": "\u00a7 11",
            "start": 133,
            "end": 137
          }
        ]
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "62c4993d",
      "input": {
        "context": "\u00a7 11 Anwendbares Recht, Gerichtsstand und Erf\u00fcllungsort (a) Anwendbares Recht Form und Inhalt der Pfandbriefe sowie alle sich daraus ergebenden Rechte und Pflichten bestimmen sich ausschlie\u00dflich nach dem Recht der Bundesrepublik Deutschland."
      },
      "expected_output": {
        "spans": [
          {
            "text": "\u00a7 11",
            "start": 0,
            "end": 4
          }
        ]
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "81038d54",
      "input": {
        "context": "Summaries are made up of disclosure requirements known as \"Elements\"."
      },
      "expected_output": {
        "spans": []
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "64db06f5",
      "input": {
        "context": "Mai 2023 0,20 % 31."
      },
      "expected_output": {
        "spans": []
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "242d41c7",
      "input": {
        "context": "B.2 Sitz / Rechtsform / geltendes Recht / Land der Die Bank hat ihre Sitze in Frankfurt an dem Main und Erfurt."
      },
      "expected_output": {
        "spans": []
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "ad77fe97",
      "input": {
        "context": "November 2017 in Bezug auf die Zulassung von unter dem Emissionsprogramm f\u00fcr Inhaberschuldverschreibungen II begebenen Schuldverschreibungen."
      },
      "expected_output": {
        "spans": []
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "f057d31d",
      "input": {
        "context": "9"
      },
      "expected_output": {
        "spans": []
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "5ee46375",
      "input": {
        "context": "Diese enthalten besondere Beschreibungen der Regelungen, die zu einer vorzeitigen Beendigung der Laufzeit der Schuldverschreibungen f\u00fchren k\u00f6nnen."
      },
      "expected_output": {
        "spans": []
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "8310e412",
      "input": {
        "context": "Nicht anwendbar Berechnungsstelle: UniCredit Bank AG, Apianstr."
      },
      "expected_output": {
        "spans": []
      },
      "source": "human",
      "confidence": 0.8
    },
    {
      "id": "227e7ef4",
      "input": {
        "context": "solche Sicherheiten oder Garantien werden auch zu keinem sp\u00e4teren Zeitpunkt gestellt werden."
      },
      "expected_output": {
        "spans": []
      },
      "source": "human",
      "confidence": 0.8
    }
  ],
  "corrections": [],
  "feedback": [],
  "rules": [
    {
      "id": "bd498487",
      "name": "Extract Legal References with Markers",
      "description": "This rule extracts legal references that include specific legal markers.",
      "format": "regex",
      "content": "(\u00a7\\s*\\d+|Art\\.\\s*\\d+|Artikel\\s*\\d+|Abs\\.\\s*\\d+|Satz\\s*\\d+|Nr\\.\\s*\\d+|Z\\.\\s*\\d+|lit\\.\\s*\\w+|BGB|HGB|AktG|DSGVO)",
      "priority": 10,
      "confidence": 0.5,
      "times_applied": 0,
      "successes": 0,
      "failures": 0,
      "created_at": "2026-01-13T00:33:50.208238"
    },
    {
      "id": "b3e99058",
      "name": "Capture Legal References with Context",
      "description": "This rule captures legal references that may have additional context or formatting.",
      "format": "regex",
      "content": "(\u00a7\\s*\\d+\\s*\\(\\d+\\)|Art\\.\\s*\\d+\\s*Abs\\.\\s*\\d+|Artikel\\s*\\d+\\s*Abs\\.\\s*\\d+|Abs\\.\\s*\\d+\\s*Satz\\s*\\d+)",
      "priority": 9,
      "confidence": 0.5,
      "times_applied": 0,
      "successes": 0,
      "failures": 0,
      "created_at": "2026-01-13T00:33:50.209325"
    },
    {
      "id": "6c225642",
      "name": "Filter Out Quoted Text",
      "description": "This rule filters out any quoted text that does not contain legal references.",
      "format": "regex",
      "content": "\"([^\"]*)\"",
      "priority": 7,
      "confidence": 0.5,
      "times_applied": 0,
      "successes": 0,
      "failures": 0,
      "created_at": "2026-01-13T00:33:50.211590"
    },
    {
      "id": "6ff20d6a",
      "name": "Capture Multiple Legal References",
      "description": "This rule captures multiple legal references in a single context.",
      "format": "code",
      "content": "def extract(input_data):\n    import re\n    spans = []\n    pattern = r'(\u00a7\\s*\\d+|Art\\.\\s*\\d+|Artikel\\s*\\d+|Abs\\.\\s*\\d+|Satz\\s*\\d+|Nr\\.\\s*\\d+|Z\\.\\s*\\d+|lit\\.\\s*\\w+|BGB|HGB|AktG|DSGVO)'\n    matches = re.finditer(pattern, input_data['context'])\n    for match in matches:\n        spans.append({'text': match.group(0), 'start': match.start(), 'end': match.end()})\n    return spans",
      "priority": 6,
      "confidence": 0.5,
      "times_applied": 0,
      "successes": 0,
      "failures": 0,
      "created_at": "2026-01-13T00:33:50.211590"
    },
    {
      "id": "40e016f1",
      "name": "Handle Abbreviations Correctly",
      "description": "This rule ensures that only valid law abbreviations are captured as legal references.",
      "format": "regex",
      "content": "\\b(BGB|HGB|AktG|DSGVO)\\b",
      "priority": 5,
      "confidence": 0.5,
      "times_applied": 0,
      "successes": 0,
      "failures": 0,
      "created_at": "2026-01-13T00:33:50.211590"
    },
    {
      "id": "a5454d21",
      "name": "Extract Legal References with Additional Formatting",
      "description": "This rule captures legal references that may include additional formatting like parentheses.",
      "format": "regex",
      "content": "(\u00a7\\s*\\d+\\s*\\(\\d+\\)|Art\\.\\s*\\d+\\s*\\(\\d+\\)|Artikel\\s*\\d+\\s*\\(\\d+\\))",
      "priority": 4,
      "confidence": 0.5,
      "times_applied": 0,
      "successes": 0,
      "failures": 0,
      "created_at": "2026-01-13T00:33:50.212691"
    },
    {
      "id": "bc95ceba",
      "name": "Ignore Plain Numbers",
      "description": "This rule ensures that plain numbers are not extracted as legal references.",
      "format": "regex",
      "content": "\\b\\d+\\b",
      "priority": 3,
      "confidence": 0.5,
      "times_applied": 0,
      "successes": 0,
      "failures": 0,
      "created_at": "2026-01-13T00:33:50.212691"
    },
    {
      "id": "dd0547dc",
      "name": "Extract Legal References with Variations",
      "description": "This rule captures variations of legal references that may include different formats.",
      "format": "regex",
      "content": "(\u00a7\\s*\\d+|Art\\.\\s*\\d+|Artikel\\s*\\d+|Abs\\.\\s*\\d+|Satz\\s*\\d+|Nr\\.\\s*\\d+|Z\\.\\s*\\d+|lit\\.\\s*\\w+|BGB|HGB|AktG|DSGVO|Richtlinie\\s*\\d+/\\d+)",
      "priority": 2,
      "confidence": 0.5,
      "times_applied": 0,
      "successes": 0,
      "failures": 0,
      "created_at": "2026-01-13T00:33:50.213728"
    }
  ],
  "version": 1
}